<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Sora:wght@500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/mdb.min.css" />
    <link rel="stylesheet" href="css/aos.css" />
    <link rel="stylesheet" href="assets/css/mainstyle.css" />
  </head>
  <body>
    <div id="navigation">
      <nav id="navbar" class="nav justify-content-center disable-select">
        <a href="#home" class="navbar-nav-btn">STRONA GŁÓWNA</a>
        <a href="/shop.html" class="navbar-nav-btn">SKLEP</a>
        <a href="/rules.html" class="navbar-nav-btn">POMOC</a>
        <a href="#ranking" class="navbar-nav-btn">RANKING</a>
        <a href="#plan" class="navbar-nav-btn">PLAN EDYCJI</a>
      </nav>
    </div>
    <section class="header" id="home">
      <div class="container">
        <div class="main">
          <h1>Domena.com</h1>
        </div>
          </g>
        </svg>
        <div class="skew" data-aos="zoom-in"
        data-aos-delay="500"
        data-aos-duration="750">
          <button class="button">
            <a href="#server">
              <h2>Zobacz więcej</h2>
            </a>
          </button>
        </div>
        
      </div>
      <div style="position: relative; top: -30px;">
      </div>
    </section>
    <section id="server" class="server">
      <div class="container">
        <div class="online" data-aos="zoom-in">
          <div>
            <div class="text-center">
              <h1 class="online">
                <p class="onlinePlayers">0/1000</p>
              </h1>
              <span class="online">
                graczy na serwerze
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="container mt-5">
        <div class="row">
          <div class="col-md-12 d-flex justify-content-center text-center mb-2 mt-5" data-aos="fade-right" >
            <div>
              <h2 class="text-white font-weight-bold">
                Skopiuj adres serwera!
              </h2>
              <div class="mt-md-12">
                <button class="button-copy copyAddr" data-clipboard-text="link">Skopiuj IP</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section id="ranking" class="ranking">
      <svg
        style="position: relative; top: -1px"
        version="1.0"
        xmlns="http://www.w3.org/2000/svg"
        width="100%"
        height="100%"
        viewBox="0 0 1980.000000 150.000000"
        preserveAspectRatio="xMidYMid meet"
      >
        <g
          transform="translate(0.000000,150.000000) scale(0.100000,-0.100000)"
          fill="#191919"
          stroke="none"
        >
          <path
            d="M40 1490 c8 -5 23 -7 33 -4 9 3 17 1 17 -4 0 -16 554 -146 1050 -247
      1869 -378 3988 -631 6175 -734 867 -42 1085 -46 2305 -46 1184 0 1411 4 2215
      41 2540 115 5104 427 7555 919 151 30 278 55 283 55 4 0 7 7 7 15 0 13 -1096
      15 -9827 15 -6288 0 -9823 -4 -9813 -10z"
          />
        </g>
      </svg>
      <div class="container">
        <div class="title" data-aos="fade-right" data-aos-duration="750">
          <h1 class="text-white">Ranking</h1>
          <p>Najlepsi gracze na serwerze</p>
        </div>
        <center>
          <div class="ranking-picker">
            <button class="rank" data-rank="rank">punkty</button>
            <button class="stone" data-rank="stone">kamień</button>
            <button class="kill">zabójstwa</button>
            <button class="refil">zjedzone refile</button>
            <button class="enchantedrefil">zjedzone koxy</button>
            <button class="guild">gildie</button>
          </div>
        </center>
        <div class="ranks">
          <div class="ranking-rank">
            <div>
              <div
                class="d-flex justify-content-center pb-5 podium"
                data-aos="zoom-in"
                data-aos-duration="1000"
              >
                <div data-aos="fade-right" data-aos-duration="1000">
                  <div class="podium-player pp2">
                    <div>
                      <span
                        style="display: inline-block; height: 64px; width: 64px"
                        ><img
                          class="minecraft-head"
                          src="https://mc-heads.net/avatar/7637c46e-1f48-4b93-ae78-99d75056e380/64"
                          alt="PaniBasiaPL avatar"
                          height="64"
                          width="64"
                      /></span>
                    </div>
                    <div>#2</div>
                    <div class="mt-1">
                      <div><a href="">rank2</a></div>
                      <div class="value">1600</div>
                    </div>
                  </div>
                </div>
                <div data-aos="zoom-in">
                  <div class="podium-player first pp1">
                    <div>
                      <span
                        style="display: inline-block; height: 64px; width: 64px"
                        ><img
                          class="minecraft-head"
                          src="https://mc-heads.net/avatar/7637c46e-1f48-4b93-ae78-99d75056e380/64"
                          alt="PaniBasiaPL avatar"
                          height="64"
                          width="64"
                      /></span>
                    </div>
                    <div>#1</div>
                    <div class="crown"></div>
                    <div class="mt-1">
                      <div><a href="/gracz/PaniBasiaPL">rank1</a></div>
                      <div class="value"><p>16700</p></div>
                    </div>
                  </div>
                </div>
                <div data-aos="fade-left" data-aos-duration="1000">
                  <div class="podium-player pp3">
                    <div>
                      <span
                        style="display: inline-block; height: 64px; width: 64px"
                        ><img
                          class="minecraft-head"
                          src="https://mc-heads.net/avatar/7637c46e-1f48-4b93-ae78-99d75056e380/64"
                          alt="PaniBasiaPL avatar"
                          height="64"
                          width="64"
                      /></span>
                    </div>
                    <div>#3</div>
                    <div>
                      <div><a href="/gracz/PaniBasiaPL">rank3</a></div>
                      <div class="value">1500</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ranking-players"></div>
          </div>
          <div class="ranking-stone" style="display: none">
            <div>
              <div class="d-flex justify-content-center pb-5">
                <div class="podium-player pp2">
                  <div>
                    <span
                      style="display: inline-block; height: 64px; width: 64px"
                      ><img
                        class="minecraft-head"
                        src="https://mc-heads.net/avatar/7637c46e-1f48-4b93-ae78-99d75056e380/64"
                        alt="PaniBasiaPL avatar"
                        height="64"
                        width="64"
                    /></span>
                  </div>
                  <div>#2</div>
                  <div class="mt-1">
                    <div><a href="/gracz/PaniBasiaPL">rank2</a></div>
                    <div class="value">100 000</div>
                  </div>
                </div>
                <div class="podium-player first pp1">
                  <div>
                    <span
                      style="display: inline-block; height: 64px; width: 64px"
                      ><img
                        class="minecraft-head"
                        src="https://mc-heads.net/avatar/PaniBasiaPL/100.png"
                        alt="PaniBasiaPL avatar"
                        height="64"
                        width="64"
                    /></span>
                  </div>
                  <div>#1</div>
                  <div class="crown"></div>
                  <div class="mt-1">
                    <div><a href="/gracz/PaniBasiaPL">rank1</a></div>
                    <div class="value">200 000</div>
                  </div>
                </div>
                <div class="podium-player pp3">
                  <div>
                    <span
                      style="display: inline-block; height: 64px; width: 64px"
                      ><img
                        class="minecraft-head"
                        src="https://mc-heads.net/avatar/PaniBasiaPL/100.png"
                        alt="PaniBasiaPL avatar"
                        height="64"
                        width="64"
                    /></span>
                  </div>
                  <div>#3</div>
                  <div>
                    <div><a href="/gracz/PaniBasiaPL">rank3</a></div>
                    <div class="value">50 000</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ranking-players">  
            </div>
          </div>
        </div>
        <div class="search">
          <form action="searchresults.php" method="GET" class="ranking-search">
            <input type="text" name="searchbox" placeholder="NICK GRACZA" />
            <button class="" name="search" value="Search">Szukaj</button>
          </form>
        </div>
      </div>
    </section>
    <div class="footer">
      <svg
        style="position: relative; top: 1px"
        version="1.0"
        xmlns="http://www.w3.org/2000/svg"
        width="100%"
        height="100%"
        viewBox="0 0 1980.000000 150.000000"
        preserveAspectRatio="xMidYMid meet"
      >
        <g
          transform="translate(0.000000,150.000000) scale(0.100000,-0.100000)"
          fill="#191919"
          stroke="none"
        >
          <path
            d="M9110 1044 c-587 -17 -865 -27 -1145 -40 -2528 -114 -5023 -416
-7485 -905 -195 -39 -356 -72 -358 -74 -2 -2 -1 -8 3 -14 4 -8 2873 -11 9796
-11 8439 0 9789 2 9789 14 0 30 -854 220 -1620 361 -1932 356 -3941 564 -6325
656 -261 10 -2398 20 -2655 13z"
          />
          <path
            d="M19740 10 c8 -5 20 -10 25 -10 6 0 3 5 -5 10 -8 5 -19 10 -25 10 -5
0 -3 -5 5 -10z"
          />
        </g>
      </svg>
    </div>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script src="assets/js/jquery-3.1.1.min.js"></script>
    <script>
      AOS.init({
        once: true,
      });
      $(".copyAddr").each(function (index) {
        $(this).click(function () {
          var copyText = $(this).attr("data-clipboard-text");
          var btn = $(this);
          var val = $(this).text();
          navigator.clipboard.writeText(copyText);
          $(this).text("skopiowano!");
          setTimeout(function () {
            btn.text(val);
          }, 1500);
        });
      });
      $(".ranking-picker").children().each(function(index) {
        $(this).click(function() {
          var id = $(this).attr('data-rank');
          if (!$(".ranking-" + id).hasClass("active")) {
            $(".ranking .active").hide();
            $(".ranking-" + id).fadeIn();
            $(".ranking .active").removeClass("active");
            $(".ranking-" + id).addClass("active");
          }
        });
      });
      $(document).ready(function (index) {
        $(".ranking-rank").addClass("active");
        $(".ranks")
          .children()
          .each(function () {
            if (!$(this).hasClass("active")) {
              $(this).hide();
            }
        });
        $(".rank").addClass("clicked");
        $(".ranking-picker").children().each(function(index) {
          $(this).click(function() {
            if(!$(this).hasClass("clicked")) {
              $(".ranking-picker .clicked").removeClass("clicked");
              $(this).addClass("clicked");
            }
          });
        });
        var onlinePlayers;
        fetch("http://127.0.0.1:5000/server")
        .then((response) => response.json())
        .then(function(data) {
          $(".onlinePlayers").html(data.online + "/" + data.max)
        })
      });
      fetch("http://127.0.0.1:5000/users/ranking/rank")
      .then( (response) => response.json())
      .then( (data) => {
        let i = 0;
        for(const user of data) {
          i++;
          if(i <= 3) {
            $(".ranking-rank div div .podium-player.pp" + i).children("div").children("span").children("img").attr("src", `https://mc-heads.net/avatar/${user.name}/100.png`);
            $(".ranking-rank div div .podium-player.pp" + i).children("div:last-of-type").children("div:first-of-type").children("a").text(user.name);
            $(".ranking-rank div div .podium-player.pp" + i).children("div:last-of-type").children("div:first-of-type").children("a").attr("href", `http://127.0.0.1:5000/user/${user.name}`);
            $(".ranking-rank div div .podium-player.pp" + i).children("div:last-of-type").children("div:last-of-type").text(user.ranking);
          }
          else {
            $(".ranking-rank .ranking-players").append(`<div data-aos="fade-right" data-aos-duration="1000">
                <a
                  href="http://127.0.0.1:5000/user/${user.name}"
                  class="table-row"
                >
                  <div class="ranking-place text-center-vertical">
                    <p>#${user.place}</p>
                  </div>
                  <div>
                    <img
                      src="https://mc-heads.net/avatar/${user.name}/100.png"
                    />
                  </div>
                  <div class="size large text-center-vertical">
                    <p>${user.name}</p>
                  </div>
                  <div class="text-center-vertical">
                    <p>${user.ranking}</p>
                  </div>
                </a>
              </div>`);
          }
        }
      });
      fetch("http://127.0.0.1:5000/users/ranking/stone")
      .then( (response) => response.json())
      .then( (data) => {
        let i = 0;
        for(const user of data) {
          i++;
          if(i <= 3) {
            $(".ranking-stone div div .podium-player.pp" + i).children("div").children("span").children("img").attr("src", `https://mc-heads.net/avatar/${user.name}/100.png`);
            $(".ranking-stone div div .podium-player.pp" + i).children("div:last-of-type").children("div:first-of-type").children("a").text(user.name);
            $(".ranking-stone div div .podium-player.pp" + i).children("div:last-of-type").children("div:first-of-type").children("a").attr("href", `http://127.0.0.1:5000/user/${user.name}`);
            $(".ranking-stone div div .podium-player.pp" + i).children("div:last-of-type").children("div:last-of-type").text(user.minelvl);
          }
          else {
            $(".ranking-stone .ranking-players").append(`<div data-aos="fade-right" data-aos-duration="1000">
                <a
                  href="http://127.0.0.1:5000/user/${user.name}"
                  class="table-row"
                >
                  <div class="ranking-place text-center-vertical">
                    <p>#${user.place}</p>
                  </div>
                  <div>
                    <img
                      src="https://mc-heads.net/avatar/${user.name}/100.png"
                    />
                  </div>
                  <div class="size large text-center-vertical">
                    <p>${user.name}</p>
                  </div>
                  <div class="text-center-vertical">
                    <p>${user.minelvl}</p>
                  </div>
                </a>
              </div>`);
          }
        }
      });
    </script>
  </body>
</html>
